<template name="posts">
  {{#each posts}}
    {{#if showPost}}
      {{>post}}
    {{/if}}
  {{/each}}
</template>

<template name="post">
  <div class="row">
   <div class="panel panel-default">
      <div class="panel-heading">
        {{#if isBeingEdited}}
          <input type="text" id="title" class="post-content" value="{{title}}" placeholder="Title"/>
          {{>autoSave}}
        {{else}}
          <b style="font-size:22px" class="panel-title">{{title}}</b>
        {{/if}}
        {{#if isAdmin}}
        <div class="btn-group pull-right">
          <button type="button" class="btn btn-default btn-sm btn-toggle-live {{btnToggleLiveClass}}">
            <span class="glyphicon glyphicon-eye-open"></span>
          </button>
          <button type="button" class="btn btn-default btn-sm btn-edit-post">
            <span class="glyphicon glyphicon-pencil"></span>
          </button>
          <button type="button" class="btn btn-default btn-sm btn-delete-post">
            <span class="glyphicon glyphicon-remove"></span>
          </button>
        </div>
        <div class="clearfix"></div>
        {{/if}}
      </div>
      <div class="panel-body">
        {{#if isBeingEdited}}
          <textarea id="content" class="post-content" cols="60" rows="20" placeholder="Put post content here (supports markdown)">{{content}}</textarea>
        {{else}}
          {{#markdown}}{{content}}{{/markdown}}
        {{/if}}
      </div>
    </div>
  </div>
</template>

<template name="autoSave">
  {{#if saving}}
    Saving..
  {{else}}
    Last saved @ {{lastSavedAt}}
  {{/if}}
</template>

